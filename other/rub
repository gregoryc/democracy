#!/bin/bash


cd stories
for i in `find -type f | sort -n`; do head $i -n 4 | selectlines | head -n 1 | tr -d "\n"; echo -n ", $i"; echo; done | t 'i.gsub(/(He|Ever|As|When|Once|Meet|There|Growing|Instead) /, " ").match(/[A-Z][a-z]+/).to_s+ ' ' + x.split(",").last' | ruby -e '
CYCLE_OF_ETHICAL_BEHAVIOUR = "<center style=color:green><b>How to Operate in Life, the best methodology

               1. Fixate

               2. Worsen social relations

               3. Find and take environmental data, research could be done, no “moral” or “ethical” limitations.

               4. Fix existential limitations problem for group.

               5. Become somewhat “sane” again.

               6. Go to 1. Repeat literally ad infinitum.</b></center>

               ".gsub(/  +/, "    ")
puts "<center><h1 style=color:green;font-size:300%>EXAMPLES OF OPERATION OF A HUMAN OR ROBOT.</h1></center>"
puts "<center><h1 style=color:green;font-size:300%>These were generated by ChatGPT but they are still valid.</h1></center>"
STDIN.each_line do |line|
	line.strip!
	a, b = line.split
#	warn line
	b = File.read(b).strip
	b.prepend CYCLE_OF_ETHICAL_BEHAVIOUR
	b=b.split(/\n\n+/).map do |i|
		"<p>#{"&nbsp;"*5}#{i.strip}</p>"
	end
	b.prepend "<hr><center style=color:green><h1>The Story of #{a}</h1></center>"
	puts b
end
'